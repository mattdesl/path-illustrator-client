(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var events=require("dom-events");var offset=require("mouse-event-offset");var dist=require("vectors/dist")(2);module.exports=function setupEvents(paths,opt){opt=opt||{};var element=opt.element||window;if(typeof opt.curveStartDistance!=="number")opt.curveStartDistance=15;var dragging=false,dragButton=0,startedCurve=false;events.on(element,"mousedown",function(ev){ev.preventDefault();var off=offset(ev);var dragStart=false;var shouldClose=ev.ctrlKey||ev.metaKey;if(shouldClose&&!paths.closed){paths.emit("close-path")}else if(paths.activePoint){dragStart=true&&paths.points.length>=0;if(ev.shiftKey&&!paths.activePoint.isControl){paths.activePoint.curve=false}else{paths.emit("move-active",{position:[off.x,off.y]})}}else if(!paths.closed){dragStart=true&&paths.points.length>=0;paths.emit("place",{position:[off.x,off.y]})}if(dragStart){dragging=true;dragButton=ev.button;startedCurve=false}});events.on(element,"mousemove",function(ev){ev.preventDefault();var off=offset(ev);var pos=[off.x,off.y];if(ev.button===dragButton&&dragging){var lastPoint=paths.lastPoint();var makingCurve=paths.activePoint&&!paths.activePoint.isControl&&ev.shiftKey;if(makingCurve){startedCurve=true;lastPoint=paths.activePoint}if(!makingCurve&&paths.activePoint){paths.emit("move-active",{position:pos})}else{if(!startedCurve){if(dist(lastPoint.position,pos)<opt.curveStartDistance)return;startedCurve=true}paths.emit("adjust-curve",{point:lastPoint,position:pos})}}else if(!dragging){paths.emit("mousemove",{position:[off.x,off.y]})}});events.on(element,"mouseup",function(ev){if(ev.button===dragButton){dragging=false}var off=offset(ev);var pos=[off.x,off.y];paths.emit("mouseup",{position:pos})})}},{"dom-events":9,"mouse-event-offset":16,"vectors/dist":19}],2:[function(require,module,exports){var events=require("dom-events");var offset=require("mouse-event-offset");require("canvas-testbed")(render,start);var paths=require("../")();var client=require("../client");var dist=require("vectors/dist")(2);var domify=require("domify");var content='<div class="info">\n	<p>click and drag to make points</p>\n	<p>shift-click a point to reset anchors</p>\n	<p>command-click or control-click to close the path</p>\n</div>';var css="body {\n	font-family: 'Lato', 'Helvetica', sans-serif;\n	font-size: 14px;\n}\n\n.info {\n	padding: 5px;\n}\np {\n	margin: 0;\n}";require("insert-css")(css);function render(ctx,width,height){ctx.clearRect(0,0,width,height);paths.draw(ctx)}function start(ctx,width,height){ctx.canvas.onselectstart=function(){return false};client(paths,{element:ctx.canvas});document.body.appendChild(domify(content))}},{"../":3,"../client":1,"canvas-testbed":4,"dom-events":9,domify:13,"insert-css":15,"mouse-event-offset":16,"vectors/dist":19}],3:[function(require,module,exports){var EventEmitter=require("events").EventEmitter;var inherits=require("inherits");var Point=require("./point");var dist=require("vectors/dist")(2);var sub=require("vectors/sub")(2);var norm=require("vectors/normalize")(2);var add=require("vectors/add")(2);var copy=require("vectors/copy")(2);var mult=require("vectors/mult")(2);function DrawPaths(opt){if(!(this instanceof DrawPaths))return new DrawPaths(opt);EventEmitter.call(this);opt=opt||{};this.points=[];this.activePoint=null;this.on("place",function(e){this.points.push(new Point(e.position))});this.on("adjust-curve",function(e){var len=dist(e.position,e.point.position);var dir=copy(e.position);norm(sub(dir,e.point.position));mult(dir,-1*len);add(dir,e.point.position);if(e.point.controls.length===1){e.point.curve=true;e.point.controls[0]=dir}else if(e.point.controls.length===2){e.point.curve=true;e.point.controls[1]=e.position;e.point.controls[0]=dir}else throw new Error("unsupported curve order "+e.point.controls.length)});this.hoverDistance=10;this.pointRadius=3;this.controlRadius=2;this.controlAlpha=.2;this.controlStyle="blue";this.pointStyle="#2d2d2d";this.on("mousemove",this._updateActive.bind(this));this.on("close-path",function(){if(this.points.length<=1)return;this.closed=true}.bind(this));this.on("move-active",function(e){var point=this.activePoint;if(!point)return;if(point.isControl&&point.parent){point.parent.controls[point.index]=e.position;point.position=e.position}else{var old=point.position;point.position=e.position;var translate=sub(copy(e.position),old);for(var j=0;j<point.controls.length;j++){var c=point.controls[j];add(c,translate)}}})}inherits(DrawPaths,EventEmitter);DrawPaths.prototype._updateActive=function(e){var closest=this.nearestPoint(e.position,this.hoverDistance);this.activePoint=closest;if(!closest){this.activePoint=this.nearestControl(e.position,this.hoverDistance)}};DrawPaths.prototype.nearestPointIndex=function(position,threshold){threshold=typeof threshold==="number"?threshold:Number.MAX_VALUE;var nearestIndex=-1;var minDist=Number.MAX_VALUE;for(var i=0;i<this.points.length;i++){var p=this.points[i];var distance=dist(p.position,position);if(distance<minDist&&distance<threshold){nearestIndex=i;minDist=distance}}return nearestIndex};DrawPaths.prototype.nearestPoint=function(position,threshold){var idx=this.nearestPointIndex(position,threshold);return idx===-1?null:this.points[idx]};DrawPaths.prototype.nearestControl=function(position,threshold){threshold=typeof threshold==="number"?threshold:Number.MAX_VALUE;var nearest=null;var associatedPoint=null;var minDist=Number.MAX_VALUE;var controlIndex=-1;for(var i=0;i<this.points.length;i++){var p=this.points[i];for(var j=0;j<p.controls.length;j++){var distance=dist(p.controls[j],position);if(distance<minDist&&distance<threshold){nearest=p.controls[j];associatedPoint=p;controlIndex=j;minDist=distance}}}return nearest?{isControl:true,position:nearest,index:controlIndex,parent:associatedPoint}:null};DrawPaths.prototype.lastPoint=function(){return this.points[this.points.length-1]};DrawPaths.prototype.firstPoint=function(){return this.points[0]};DrawPaths.prototype.drawPath=function(ctx,path){var points=path.points,closed=path.closed;for(var i=0;i<points.length;i++){var p=points[i];var pos=p.position;if(i===0)ctx.moveTo(pos[0],pos[1]);var last=i>0?points[i-1]:null;if(i===0&&points.length>1&&closed){var last=points[points.length-1];ctx.moveTo(last.position[0],last.position[1])}if(last&&last.curve&&p.curve){var c1=last.controls[1],c2=p.controls[0];ctx.bezierCurveTo(c1[0],c1[1],c2[0],c2[1],pos[0],pos[1])}else if(last&&last.curve){var c1=last.controls[1];ctx.quadraticCurveTo(c1[0],c1[1],pos[0],pos[1])}else if(p.curve&&i>0){var c1=p.controls[0];ctx.quadraticCurveTo(c1[0],c1[1],pos[0],pos[1])}else ctx.lineTo(pos[0],pos[1])}};DrawPaths.prototype.drawEditingPath=function(ctx,path){var points=path.points,closed=path.closed;var radius=this.pointRadius,controlStyle="blue",controlAlpha=this.controlAlpha;pointStyle="#2d2d2d";if(closed){ctx.beginPath();this.drawPath(ctx,path);ctx.globalAlpha=.2;ctx.fillStyle=pointStyle;ctx.fill()}ctx.beginPath();for(var i=0;i<points.length;i++){if(!points[i].curve)continue;var pos=points[i].position;var controls=points[i].controls;for(var j=0;j<controls.length;j++){var p=controls[j];ctx.moveTo(pos[0],pos[1]);ctx.lineTo(p[0],p[1])}}ctx.globalAlpha=controlAlpha;ctx.lineWidth=1;ctx.strokeStyle=controlStyle;ctx.stroke();ctx.beginPath();for(var i=0;i<points.length;i++){if(!points[i].curve)continue;var controls=points[i].controls;for(var j=0;j<controls.length;j++){var p=controls[j];ctx.moveTo(p[0],p[1]);ctx.arc(p[0],p[1],radius,0,Math.PI*2,false)}}ctx.globalAlpha=controlAlpha;ctx.fillStyle=controlStyle;ctx.fill();ctx.beginPath();this.drawPath(ctx,path);ctx.lineWidth=2;ctx.globalAlpha=.5;ctx.strokeStyle=pointStyle;ctx.stroke();ctx.beginPath();for(var i=0;i<points.length;i++){var p=points[i].position;ctx.moveTo(p[0],p[1]);ctx.arc(p[0],p[1],radius,0,Math.PI*2,false)}ctx.globalAlpha=1;ctx.fillStyle=pointStyle;ctx.fill()};DrawPaths.prototype.draw=function(ctx){this.drawEditingPath(ctx,{points:this.points,closed:this.closed});if(this.activePoint){var pos=this.activePoint.position;var isControl=this.activePoint.isControl;var radius=isControl?this.controlRadius:this.pointRadius;ctx.globalAlpha=isControl?this.controlAlpha:.5;ctx.beginPath();ctx.lineWidth=2;ctx.strokeStyle=isControl?this.controlStyle:this.pointStyle;ctx.arc(pos[0],pos[1],radius+4,0,Math.PI*2,false);ctx.stroke()}};module.exports=DrawPaths},{"./point":24,events:25,inherits:14,"vectors/add":17,"vectors/copy":18,"vectors/dist":19,"vectors/mult":21,"vectors/normalize":22,"vectors/sub":23}],4:[function(require,module,exports){var domready=require("domready");require("raf.js");var CanvasApp=require("canvas-app");module.exports=function(render,start,options){domready(function(){if(typeof render==="object"&&render){options=render;render=null;start=null}else if(typeof start==="object"&&start){options=start;start=null}options=options||{};if(typeof options.onReady!=="function")options.onReady=start;var runner=CanvasApp(render,options);runner.canvas.setAttribute("id","canvas");document.body.appendChild(runner.canvas);document.body.style.margin="0";document.body.style.overflow="hidden";runner.start()})}},{"canvas-app":5,domready:7,"raf.js":8}],5:[function(require,module,exports){var getGL=require("webgl-context");function CanvasApp(render,options){if(!(this instanceof CanvasApp))return new CanvasApp(render,options);if(typeof render==="object"&&render){options=render;render=null}render=typeof render==="function"?render:options.onRender;options=options||{};options.retina=typeof options.retina==="boolean"?options.retina:true;var hasWidth=typeof options.width==="number",hasHeight=typeof options.height==="number";if(hasWidth||hasHeight)options.ignoreResize=true;options.width=hasWidth?options.width:window.innerWidth;options.height=hasHeight?options.height:window.innerHeight;var DPR=options.retina?window.devicePixelRatio||1:1;var canvas=options.canvas||document.createElement("canvas");canvas.width=options.width*DPR;canvas.height=options.height*DPR;if(options.retina){canvas.style.width=options.width+"px";canvas.style.height=options.height+"px"}var context,attribs=options.contextAttributes||{};this.isWebGL=false;if(options.context==="webgl"||options.context==="experimental-webgl"){context=getGL({canvas:canvas,attributes:attribs});if(!context){throw"WebGL Context Not Supported -- try enabling it or using a different browser"}this.isWebGL=true}else{context=canvas.getContext(options.context||"2d",attribs)}this.running=false;this.width=options.width;this.height=options.height;this.canvas=canvas;this.context=context;this.onResize=options.onResize;this._DPR=DPR;this._retina=options.retina;this._once=options.once;this._ignoreResize=options.ignoreResize;this._lastFrame=null;this._then=Date.now();this.fps=60;this._frames=0;this._prevTime=this._then;if(!this._ignoreResize){window.addEventListener("resize",function(){this.resize(window.innerWidth,window.innerHeight)}.bind(this));window.addEventListener("orientationchange",function(){this.resize(window.innerWidth,window.innerHeight)}.bind(this))}if(typeof render==="function"){this.onRender=render.bind(this)}else{this.onRender=function(context,width,height,dt){}}this.renderOnce=function(){var now=Date.now();var dt=now-this._then;this._frames++;if(now>this._prevTime+1e3){this.fps=Math.round(this._frames*1e3/(now-this._prevTime));this._prevTime=now;this._frames=0}if(!this.isWebGL){this.context.save();this.context.scale(this._DPR,this._DPR)}this.onRender(this.context,this.width,this.height,dt);if(!this.isWebGL)this.context.restore();this._then=now};this._renderHandler=function(){if(!this.running)return;if(!this._once){this._lastFrame=requestAnimationFrame(this._renderHandler)}this.renderOnce()}.bind(this);if(typeof options.onReady==="function"){options.onReady.call(this,context,this.width,this.height)}}Object.defineProperty(CanvasApp.prototype,"retinaEnabled",{set:function(v){this._retina=v;this._DPR=this._retina?window.devicePixelRatio||1:1;this.resize(this.width,this.height)},get:function(){return this._retina}});CanvasApp.prototype.resetFPS=function(){this._frames=0;this._prevTime=Date.now();this._then=this._prevTime;this.fps=60};CanvasApp.prototype.start=function(){if(this.running)return;if(this._lastFrame)cancelAnimationFrame(this._lastFrame);this.resetFPS();this.running=true;this._lastFrame=requestAnimationFrame(this._renderHandler)};CanvasApp.prototype.stop=function(){if(this._lastFrame){cancelAnimationFrame(this._lastFrame);this._lastFrame=null}this.running=false};CanvasApp.prototype.resize=function(width,height){var canvas=this.canvas;this.width=width;this.height=height;canvas.width=this.width*this._DPR;canvas.height=this.height*this._DPR;if(this._retina){canvas.style.width=this.width+"px";canvas.style.height=this.height+"px"}if(this._once)requestAnimationFrame(this._renderHandler);if(typeof this.onResize==="function")this.onResize(this.width,this.height)};module.exports=CanvasApp},{"webgl-context":6}],6:[function(require,module,exports){module.exports=function(opts){opts=opts||{};var canvas=opts.canvas||document.createElement("canvas");if(typeof opts.width==="number")canvas.width=opts.width;if(typeof opts.height==="number")canvas.height=opts.height;var attribs=opts.attributes||opts.attribs||{};try{gl=canvas.getContext("webgl",attribs)||canvas.getContext("experimental-webgl",attribs)}catch(e){gl=null}return gl}},{}],7:[function(require,module,exports){!function(name,definition){if(typeof module!="undefined")module.exports=definition();else if(typeof define=="function"&&typeof define.amd=="object")define(definition);else this[name]=definition()}("domready",function(){var fns=[],listener,doc=document,domContentLoaded="DOMContentLoaded",loaded=/^loaded|^c/.test(doc.readyState);if(!loaded)doc.addEventListener(domContentLoaded,listener=function(){doc.removeEventListener(domContentLoaded,listener);loaded=1;while(listener=fns.shift())listener()});return function(fn){loaded?fn():fns.push(fn)}})},{}],8:[function(require,module,exports){(function(window){var lastTime=0,vendors=["webkit","moz"],requestAnimationFrame=window.requestAnimationFrame,cancelAnimationFrame=window.cancelAnimationFrame,i=vendors.length;while(--i>=0&&!requestAnimationFrame){requestAnimationFrame=window[vendors[i]+"RequestAnimationFrame"];cancelAnimationFrame=window[vendors[i]+"CancelAnimationFrame"]}if(!requestAnimationFrame||!cancelAnimationFrame){requestAnimationFrame=function(callback){var now=+new Date,nextTime=Math.max(lastTime+16,now);return setTimeout(function(){callback(lastTime=nextTime)},nextTime-now)};cancelAnimationFrame=clearTimeout}window.requestAnimationFrame=requestAnimationFrame;window.cancelAnimationFrame=cancelAnimationFrame})(window)},{}],9:[function(require,module,exports){var synth=require("synthetic-dom-events");var on=function(element,name,fn,capture){return element.addEventListener(name,fn,capture||false)};var off=function(element,name,fn,capture){return element.removeEventListener(name,fn,capture||false)};var once=function(element,name,fn,capture){function tmp(ev){off(element,name,tmp,capture);fn(ev)}on(element,name,tmp,capture)};var emit=function(element,name,opt){var ev=synth(name,opt);element.dispatchEvent(ev)};if(!document.addEventListener){on=function(element,name,fn){return element.attachEvent("on"+name,fn)}}if(!document.removeEventListener){off=function(element,name,fn){return element.detachEvent("on"+name,fn)}}if(!document.dispatchEvent){emit=function(element,name,opt){var ev=synth(name,opt);return element.fireEvent("on"+ev.type,ev)}}module.exports={on:on,off:off,once:once,emit:emit}},{"synthetic-dom-events":10}],10:[function(require,module,exports){var win=window;var doc=document||{};var root=doc.documentElement||{};var use_key_event=true;try{doc.createEvent("KeyEvents")}catch(err){use_key_event=false}function check_kb(ev,opts){if(ev.ctrlKey!=(opts.ctrlKey||false)||ev.altKey!=(opts.altKey||false)||ev.shiftKey!=(opts.shiftKey||false)||ev.metaKey!=(opts.metaKey||false)||ev.keyCode!=(opts.keyCode||0)||ev.charCode!=(opts.charCode||0)){ev=document.createEvent("Event");ev.initEvent(opts.type,opts.bubbles,opts.cancelable);ev.ctrlKey=opts.ctrlKey||false;ev.altKey=opts.altKey||false;ev.shiftKey=opts.shiftKey||false;ev.metaKey=opts.metaKey||false;ev.keyCode=opts.keyCode||0;ev.charCode=opts.charCode||0}return ev}var modern=function(type,opts){opts=opts||{};var family=typeOf(type);var init_fam=family;if(family==="KeyboardEvent"&&use_key_event){family="KeyEvents";init_fam="KeyEvent"}var ev=doc.createEvent(family);var init_fn="init"+init_fam;var init=typeof ev[init_fn]==="function"?init_fn:"initEvent";var sig=initSignatures[init];var args=[];var used={};opts.type=type;for(var i=0;i<sig.length;++i){var key=sig[i];var val=opts[key];if(val===undefined){val=ev[key]}used[key]=true;args.push(val)}ev[init].apply(ev,args);if(family==="KeyboardEvent"){ev=check_kb(ev,opts)}for(var key in opts){if(!used[key]){ev[key]=opts[key]}}return ev};var legacy=function(type,opts){opts=opts||{};var ev=doc.createEventObject();ev.type=type;for(var key in opts){if(opts[key]!==undefined){ev[key]=opts[key]}}return ev};module.exports=doc.createEvent?modern:legacy;var initSignatures=require("./init.json");var types=require("./types.json");var typeOf=function(){var typs={};for(var key in types){var ts=types[key];for(var i=0;i<ts.length;i++){typs[ts[i]]=key}}return function(name){return typs[name]||"Event"}}()},{"./init.json":11,"./types.json":12}],11:[function(require,module,exports){module.exports={initEvent:["type","bubbles","cancelable"],initUIEvent:["type","bubbles","cancelable","view","detail"],initMouseEvent:["type","bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget"],initMutationEvent:["type","bubbles","cancelable","relatedNode","prevValue","newValue","attrName","attrChange"],initKeyboardEvent:["type","bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"],initKeyEvent:["type","bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"]}},{}],12:[function(require,module,exports){module.exports={MouseEvent:["click","mousedown","mouseup","mouseover","mousemove","mouseout"],KeyboardEvent:["keydown","keyup","keypress"],MutationEvent:["DOMSubtreeModified","DOMNodeInserted","DOMNodeRemoved","DOMNodeRemovedFromDocument","DOMNodeInsertedIntoDocument","DOMAttrModified","DOMCharacterDataModified"],HTMLEvents:["load","unload","abort","error","select","change","submit","reset","focus","blur","resize","scroll"],UIEvent:["DOMFocusIn","DOMFocusOut","DOMActivate"]}},{}],13:[function(require,module,exports){module.exports=parse;var map={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:[0,"",""]};map.td=map.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];map.option=map.optgroup=[1,'<select multiple="multiple">',"</select>"];map.thead=map.tbody=map.colgroup=map.caption=map.tfoot=[1,"<table>","</table>"];map.text=map.circle=map.ellipse=map.line=map.path=map.polygon=map.polyline=map.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function parse(html,doc){if("string"!=typeof html)throw new TypeError("String expected");if(!doc)doc=document;var m=/<([\w:]+)/.exec(html);if(!m)return doc.createTextNode(html);html=html.replace(/^\s+|\s+$/g,"");var tag=m[1];if(tag=="body"){var el=doc.createElement("html");el.innerHTML=html;return el.removeChild(el.lastChild)}var wrap=map[tag]||map._default;var depth=wrap[0];var prefix=wrap[1];var suffix=wrap[2];var el=doc.createElement("div");el.innerHTML=prefix+html+suffix;while(depth--)el=el.lastChild;if(el.firstChild==el.lastChild){return el.removeChild(el.firstChild)}var fragment=doc.createDocumentFragment();while(el.firstChild){fragment.appendChild(el.removeChild(el.firstChild))}return fragment}},{}],14:[function(require,module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},{}],15:[function(require,module,exports){var inserted={};module.exports=function(css,options){if(inserted[css])return;inserted[css]=true;var elem=document.createElement("style");elem.setAttribute("type","text/css");if("textContent"in elem){elem.textContent=css}else{elem.styleSheet.cssText=css}var head=document.getElementsByTagName("head")[0];if(options&&options.prepend){head.insertBefore(elem,head.childNodes[0])}else{head.appendChild(elem)}}},{}],16:[function(require,module,exports){module.exports=function offset(ev,options){ev=ev||window.event;var target=ev.target||ev.srcElement;var rect=options&&options.clientRect||target.getBoundingClientRect(),clientX=options&&options.clientX,clientY=options&&options.clientY;clientX=typeof clientX==="number"?clientX:ev.clientX;clientY=typeof clientY==="number"?clientY:ev.clientY;return{x:clientX-rect.left,y:clientY-rect.top}}},{}],17:[function(require,module,exports){module.exports=require("./lib/operator")("add","+")},{"./lib/operator":20}],18:[function(require,module,exports){module.exports=function(){return copy};function copy(vec){return vec.slice(0)}},{}],19:[function(require,module,exports){module.exports=generator;function generator(dims){dims=+dims|0;var body=[];body.push("return function dist"+dims+"(vec, other) {");var els=[];for(var i=0;i<dims;i+=1){body.push("var p"+i+" = other["+i+"]-vec["+i+"]");els.push("p"+i+"*p"+i)}body.push("return Math.sqrt("+els.join(" + ")+")");body.push("}");return Function(body.join("\n"))()}},{}],20:[function(require,module,exports){module.exports=operator;function operator(name,op){return function generator(dims,opts){dims=+dims|0;opts=opts||{};var scalars="scalars"in opts?opts.scalars:true;var vectors="vectors"in opts?opts.vectors:true;var both=scalars&&vectors;var body=[];if(!scalars&&!vectors)throw new Error("Your function must accept either scalars or vectors");body.push("return function "+name+dims+"(vec) {");body.push("var i = arguments.length");body.push("while (--i) {");if(both)body.push("if (Array.isArray(arguments[i])) {");if(vectors){for(var i=0;i<dims;i+=1){body.push("vec["+i+"] "+op+"= arguments[i]["+i+"]")}}if(both)body.push("} else {");if(scalars){for(var i=0;i<dims;i+=1){body.push("vec["+i+"] "+op+"= arguments[i]")}}if(both)body.push("}");body.push("}");body.push("return vec");body.push("}");return Function(body.join("\n"))()}}},{}],21:[function(require,module,exports){module.exports=require("./lib/operator")("mult","*")},{"./lib/operator":20}],22:[function(require,module,exports){module.exports=generator;function generator(dims){dims=+dims|0;var body=[];body.push("return function normalize"+dims+"(vec, scalar) {");var els=[];for(var i=0;i<dims;i+=1){els.push("vec["+i+"]*vec["+i+"]")}body.push("var mag = Math.sqrt("+els.join("+")+")");body.push("if (mag === 0) {");for(var i=0;i<dims;i+=1){body.push("vec["+i+"] = 0")}body.push("} else {");for(var i=0;i<dims;i+=1){body.push("vec["+i+"] /= mag")}body.push("}");body.push("return vec");body.push("}");return Function(body.join("\n"))()}},{}],23:[function(require,module,exports){module.exports=require("./lib/operator")("sub","-")},{"./lib/operator":20}],24:[function(require,module,exports){function Point(position){this.position=position||[0,0];this.controls=[[0,0],[0,0]];this.curve=false}module.exports=Point},{}],25:[function(require,module,exports){function EventEmitter(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");this._maxListeners=n;return this};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events)this._events={};if(type==="error"){if(!this._events.error||isObject(this._events.error)&&!this._events.error.length){er=arguments[1];if(er instanceof Error){throw er}else{throw TypeError('Uncaught, unspecified "error" event.')}return false}}handler=this._events[type];if(isUndefined(handler))return false;if(isFunction(handler)){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:len=arguments.length;args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];handler.apply(this,args)}}else if(isObject(handler)){len=arguments.length;args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];listeners=handler.slice();len=listeners.length;for(i=0;i<len;i++)listeners[i].apply(this,args)}return true};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener);if(!this._events[type])this._events[type]=listener;else if(isObject(this._events[type]))this._events[type].push(listener);else this._events[type]=[this._events[type],listener];if(isObject(this._events[type])&&!this._events[type].warned){var m;if(!isUndefined(this._maxListeners)){m=this._maxListeners}else{m=EventEmitter.defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);if(typeof console.trace==="function"){console.trace()}}}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError("listener must be a function");var fired=false;function g(){this.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments)}}g.listener=listener;this.on(type,g);return this};EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;list=this._events[type];length=list.length;position=-1;if(list===listener||isFunction(list.listener)&&list.listener===listener){delete this._events[type];if(this._events.removeListener)this.emit("removeListener",type,listener)}else if(isObject(list)){for(i=length;i-->0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}}if(position<0)return this;if(list.length===1){list.length=0;delete this._events[type]}else{list.splice(position,1)}if(this._events.removeListener)this.emit("removeListener",type,listener)}return this};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[type])delete this._events[type];return this}if(arguments.length===0){for(key in this._events){if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events={};return this}listeners=this._events[type];if(isFunction(listeners)){this.removeListener(type,listeners)}else{while(listeners.length)this.removeListener(type,listeners[listeners.length-1])}delete this._events[type];return this};EventEmitter.prototype.listeners=function(type){var ret;if(!this._events||!this._events[type])ret=[];else if(isFunction(this._events[type]))ret=[this._events[type]];else ret=this._events[type].slice();return ret};EventEmitter.listenerCount=function(emitter,type){var ret;if(!emitter._events||!emitter._events[type])ret=0;else if(isFunction(emitter._events[type]))ret=1;else ret=emitter._events[type].length;return ret};function isFunction(arg){return typeof arg==="function"}function isNumber(arg){return typeof arg==="number"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isUndefined(arg){return arg===void 0}},{}]},{},[2]);